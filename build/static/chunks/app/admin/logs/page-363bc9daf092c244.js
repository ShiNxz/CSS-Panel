(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[757],{9197:function(e,r,t){Promise.resolve().then(t.bind(t,607))},593:function(e,r,t){"use strict";t.r(r);var n=t(1840),a=t(7917),i=t(1318),s=t(4740),u=t(646);r.default=e=>{let{children:r,flags:t}=e,{admin:o,isLoading:l}=(0,u.ZP)(),c=(0,i.useRouter)();return(0,s.useEffect)(()=>{if(!l){if(!o)return c.push("/");if(t.length>0&&!t.some(e=>{var r;return null===(r=o.flags)||void 0===r?void 0:r.includes(e)}))return c.push("/admin")}},[o,l,c,t]),l?(0,n.jsx)(a.c,{}):o?(0,n.jsx)(n.Fragment,{children:r}):(0,n.jsx)(n.Fragment,{children:"No Access"})}},7655:function(e,r,t){"use strict";t.r(r),t.d(r,{ADMIN_TABS:function(){return u}});var n=t(1840),a=t(1318),i=t(994),s=t(986);r.default=()=>{let e=(0,a.usePathname)(),r=(0,a.useRouter)();return(0,n.jsx)(i.n,{"aria-label":"Admin-tabs",selectedKey:e,onSelectionChange:e=>r.push(e),items:u,children:e=>(0,n.jsx)(s.r,{title:e.title},e.path)})};let u=[{path:"/admin",title:"Statistics",permissions:[]},{path:"/admin/admins",title:"Manage Admins",permissions:["@web/root","@css/root","@web/admins"]},{path:"/admin/servers",title:"Manage Servers",permissions:["@web/root","@css/root","@web/servers"]},{path:"/admin/bans",title:"Manage Bans",permissions:["@web/root","@css/root","@web/bans"]},{path:"/admin/mutes",title:"Manage Mutes",permissions:["@web/root","@css/root","@web/mutes"]},{path:"/admin/logs",title:"Logs",permissions:["@web/root","@css/root","@web/logs"]},{path:"/admin/settings",title:"Panel Settings",permissions:["@web/root","@css/root"]}]},607:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return R}});var n=t(1840),a=t(4740),i=t(5458),s=t(673),u=t(1070),o=t(7891),l=t(6840),c=t(9763),d=t(7614),m=(0,l.Gp)((e,r)=>{var t;let{as:a,className:i,children:s,...u}=e,l=(0,c.gy)(r),{slots:m,classNames:f}=(0,o.R)(),h=(0,d.W)(null==f?void 0:f.footer,i);return(0,n.jsx)(a||"div",{ref:l,className:null==(t=m.footer)?void 0:t.call(m,{class:h}),...u,children:s})});m.displayName="NextUI.CardFooter";var f=t(3691),h=t(7917),p=t(1318),v=t(7655),g=t(7463);function x(e,r){return e===r}function w(e,r){return r}var b=t(593),j=t(175),y=t(917),N=t(7313),A=t(8568),M=t(9919),P=e=>{var r,t,a;let{admin:o,message:l,title:c,time:d}=e;return(0,n.jsxs)(i.w,{fullWidth:!0,children:[o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.u,{className:"flex gap-3",children:[(0,n.jsx)(N.J,{alt:(null===(r=o.user)||void 0===r?void 0:r.personaname)||o.player_name,height:40,radius:"sm",src:null===(t=o.user)||void 0===t?void 0:t.avatarmedium,width:40}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{className:"text-md font-medium",children:(null===(a=o.user)||void 0===a?void 0:a.personaname)||o.player_name}),(0,n.jsx)("p",{className:"text-small text-default-500",children:"Flags"})]})]}),(0,n.jsx)(A.j,{})]}),(0,n.jsxs)(u.G,{children:[(0,n.jsx)("h4",{className:"text-lg font-medium",children:c}),(0,n.jsx)("p",{className:"text-sm",children:l})]}),(0,n.jsx)(A.j,{}),(0,n.jsx)(m,{className:"text-sm",children:(0,M.Q)(d)+" ago"})]})},R=()=>{var e,r,t,o,l,c,d,N;let[A,M]=(0,a.useState)(1),[R,S]=(0,a.useState)(""),[C]=(t=r&&r.equalityFn||x,l=(o=(0,a.useReducer)(w,R))[0],c=o[1],d=function(e,r,t){var n=this,i=(0,a.useRef)(null),s=(0,a.useRef)(0),u=(0,a.useRef)(null),o=(0,a.useRef)([]),l=(0,a.useRef)(),c=(0,a.useRef)(),d=(0,a.useRef)(e),m=(0,a.useRef)(!0);d.current=e;var f=!r&&0!==r;if("function"!=typeof e)throw TypeError("Expected a function");r=+r||0;var h=!!(t=t||{}).leading,p=!("trailing"in t)||!!t.trailing,v="maxWait"in t,g="debounceOnServer"in t&&!!t.debounceOnServer,x=v?Math.max(+t.maxWait||0,r):null;return(0,a.useEffect)(function(){return m.current=!0,function(){m.current=!1}},[]),(0,a.useMemo)(function(){var e=function(e){var r=o.current,t=l.current;return o.current=l.current=null,s.current=e,c.current=d.current.apply(t,r)},t=function(e,r){f&&cancelAnimationFrame(u.current),u.current=f?requestAnimationFrame(e):setTimeout(e,r)},a=function(e){if(!m.current)return!1;var t=e-i.current;return!i.current||t>=r||t<0||v&&e-s.current>=x},g=function(r){return u.current=null,p&&o.current?e(r):(o.current=l.current=null,c.current)},w=function e(){var n=Date.now();if(a(n))return g(n);if(m.current){var u=r-(n-i.current);t(e,v?Math.min(u,x-(n-s.current)):u)}},b=function(){var d=Date.now(),f=a(d);if(o.current=[].slice.call(arguments),l.current=n,i.current=d,f){if(!u.current&&m.current)return s.current=i.current,t(w,r),h?e(i.current):c.current;if(v)return t(w,r),e(i.current)}return u.current||t(w,r),c.current};return b.cancel=function(){u.current&&(f?cancelAnimationFrame(u.current):clearTimeout(u.current)),s.current=0,o.current=i.current=l.current=u.current=null},b.isPending=function(){return!!u.current},b.flush=function(){return u.current?g(Date.now()):c.current},b},[h,v,r,x,p,f,!0,g])}((0,a.useCallback)(function(e){return c(e)},[c]),1e3,r),t((N=(0,a.useRef)(R)).current,R)||(d(R),N.current=R),[l,d]),{data:k,isLoading:_}=(0,y.ZP)("/api/admin/logs?page=".concat(A,"&rows=").concat(20,"&query=").concat(C),j.Z,{keepPreviousData:!0}),F=(0,a.useMemo)(()=>(null==k?void 0:k.count)?Math.ceil(k.count/20):0,[null==k?void 0:k.count,20]),Z=(0,p.usePathname)(),D=v.ADMIN_TABS.find(e=>e.path===Z);return(0,n.jsx)(b.default,{flags:(null==D?void 0:D.permissions)||[],children:(0,n.jsxs)(i.w,{children:[(0,n.jsxs)(s.u,{className:"text-2xl font-medium flex flex-row justify-between items-center",children:[(0,n.jsx)("div",{children:"Logs"}),(0,n.jsx)(g.Y,{label:"Search...",placeholder:"You can search by title or message...",className:"w-1/5",value:R,onValueChange:S,isClearable:!0})]}),(0,n.jsx)(u.G,{className:"grid grid-cols-3 gap-4",children:_?(0,n.jsx)(h.c,{}):k&&(null===(e=k.results)||void 0===e?void 0:e.map(e=>(0,a.createElement)(P,{...e,key:e.id})))}),(0,n.jsx)(m,{children:(0,n.jsx)(f.g,{color:"primary",page:A,total:F,onChange:e=>M(e),className:"mx-auto mt-10",size:"sm",isCompact:!0,showControls:!0,showShadow:!0})})]})})}},175:function(e,r,t){"use strict";var n=t(1916);r.Z=e=>n.Z.get(e).then(e=>e.data)},646:function(e,r,t){"use strict";t.d(r,{hY:function(){return u},jc:function(){return o}});var n=t(2573),a=t(917),i=t(175),s=t(1916);let u=async()=>{await (0,s.Z)("/api/auth/logout"),await (0,a.JG)("/api/auth"),n.Am.success("Logged out successfully")},o=()=>{let e=window.innerWidth/2-300,r=window.innerHeight/2-400,t=window.open("/api/auth/login/","","toolbar=no, location=no, directories=no, status=no, menubar=no, \n		  scrollbars=no, resizable=yes, copyhistory=no, width=".concat(600,", \n		  height=").concat(800,", top=").concat(r,", left=").concat(e)),i=setInterval(async()=>{t&&t.closed&&(await (0,a.JG)("/api/auth"),n.Am.success("Logged in successfully!"),clearInterval(i))},1e3)};r.ZP=()=>{let{data:e,isLoading:r,error:t}=(0,a.ZP)("/api/auth",i.Z);return e&&e.admin&&e.admin.group&&(e.admin.flags=e.admin.group.flags,e.admin.immunity=e.admin.group.immunity),{user:t||!e?null:e.user,admin:t||!e?null:e.admin,isLoading:r}}},8568:function(e,r,t){"use strict";t.d(r,{j:function(){return l}});var n=t(6),a=(0,t(2419).tv)({base:"shrink-0 bg-divider border-none",variants:{orientation:{horizontal:"w-full h-divider",vertical:"h-full w-divider"}},defaultVariants:{orientation:"horizontal"}}),i=t(4740),s=t(6840),u=t(1840),o=(0,s.Gp)((e,r)=>{let{Component:t,getDividerProps:s}=function(e){var r;let t,s;let{as:u,className:o,orientation:l,...c}=e,d=u||"hr";"hr"===d&&"vertical"===l&&(d="div");let{separatorProps:m}=(r={elementType:"string"==typeof d?d:"hr",orientation:l},s=(0,n.z)(r,{enabled:"string"==typeof r.elementType}),("vertical"===r.orientation&&(t="vertical"),"hr"!==r.elementType)?{separatorProps:{...s,role:"separator","aria-orientation":t}}:{separatorProps:s}),f=(0,i.useMemo)(()=>a({orientation:l,className:o}),[l,o]);return{Component:d,getDividerProps:(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{className:f,role:"separator","data-orientation":l,...m,...c,...e}},[f,l,m,c])}}({...e});return(0,u.jsx)(t,{ref:r,...s()})});o.displayName="NextUI.Divider";var l=o},8273:function(e,r,t){"use strict";t.d(r,{e:function(){return n},x:function(){return a}});var n=e=>(null==e?void 0:e.length)<=4?e:null==e?void 0:e.slice(0,3),a=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];let n=" ";for(let e of r)if("string"==typeof e&&e.length>0){n=e;break}return n}}},function(e){e.O(0,[356,429,277,848,355,869,241,290,942,784,744],function(){return e(e.s=9197)}),_N_E=e.O()}]);